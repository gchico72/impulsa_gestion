{% extends 'base.html' %}
{% block title %}Reporte — Cooperadora{% endblock %}
{% block content %}
<h2>Reporte de Movimientos</h2>

<form method="get" class="form-inline">
  <label>Desde: <input type="date" name="desde" value="{{ desde }}"></label>
  &nbsp;
  <label>Hasta: <input type="date" name="hasta" value="{{ hasta }}"></label>
  &nbsp;
  <button class="btn" type="submit">Filtrar</button>
  &nbsp;
  <a class="btn" href="?{% if desde %}desde={{ desde }}&{% endif %}{% if hasta %}hasta={{ hasta }}&{% endif %}format=csv">Exportar CSV</a>
</form>

{% if errors %}
  <div class="errors">
    <ul>
      {% for e in errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  </div>
{% endif %}

<table class="table">
  <thead>
    <tr><th>Fecha</th><th>Tipo</th><th>Monto</th><th>Descripción</th></tr>
  </thead>
  <tbody>
    {% for t in transactions %}
      <tr>
        <td>{{ t.date }}</td>
        <td>{{ t.get_type_display }}</td>
        <td>{{ t.amount }}</td>
        <td>{{ t.description }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="4">No hay transacciones para el rango seleccionado.</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
